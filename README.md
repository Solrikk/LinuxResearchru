# Linux Fundamentals Part 1

# Где используется Linux?

Справедливо сказать, что Linux гораздо более устрашающий для изучения, чем операционные системы (ОС) вроде Windows. Обе системы имеют свои преимущества и недостатки. Например, Linux значительно более легковесный, и вы будете удивлены, узнав, что с большой вероятностью вы используете Linux в той или иной форме каждый день! Linux используется в:

- Веб-сайтах, которые вы посещаете
- Автомобильных развлекательных/управляющих панелях
- Системах торговых точек (POS), таких как кассовые аппараты в магазинах
- Критически важной инфраструктуре, такой как контроллеры светофоров или промышленные датчики

## Дистрибутивы Linux

Название "Linux" на самом деле является общим термином для множества ОС, основанных на UNIX (другая операционная система). Благодаря открытому исходному коду Linux, варианты Linux бывают самых разных форм и размеров — наилучшим образом подходящих для того, для чего система используется.

Например, Ubuntu и Debian являются одними из наиболее распространенных дистрибутивов Linux, поскольку они очень расширяемы. То есть вы можете запускать Ubuntu как сервер (например, для веб-сайтов и веб-приложений) или как полноценный рабочий стол. В этой серии мы будем использовать Ubuntu.

**Примечание:** Ubuntu Server может работать на системах всего с 512МБ ОЗУ!

Подобно тому, как у вас есть разные версии Windows (7, 8 и 10), существует множество различных версий/дистрибутивов Linux.

Как мы уже обсуждали, большим преимуществом использования ОС, таких как Ubuntu, является их легковесность. Конечно, это не обходится без недостатков — часто отсутствует графический интерфейс пользователя (GUI) или то, что также известно как рабочий стол, который мы можем использовать для взаимодействия с машиной (если он не был установлен). Большая часть взаимодействия с этими системами происходит через "Терминал".

"Терминал" полностью текстовый и поначалу может показаться устрашающим. Однако, если мы разберем некоторые команды, через некоторое время вы быстро освоитесь с использованием терминала!

Вот как выглядит терминал:
```
tryhackme@linux1:~$ введите команды здесь
```

Нам нужно уметь выполнять основные функции, такие как навигация по файлам, вывод их содержимого и создание файлов! Команды для этого самоочевидны (как только вы узнаете, что они означают, конечно...)

## Первые команды

Давайте начнем с двух первых команд, которые я разобрал в таблице ниже:

| Команда | Описание |
|---------|----------|
| echo    | Выводит любой текст, который мы предоставляем |
| whoami  | Показывает, под каким пользователем мы вошли в систему |

Посмотрите примеры использования каждой команды ниже:

### Использование echo
```bash
tryhackme@linux1:~$ echo Привет
Привет
tryhackme@linux1:~$ echo "Привет, друг!"
Привет, друг!
```

Как показано в терминале выше, если мы хотим вывести одно слово, нам не нужно использовать кавычки, например, `echo Привет`. Однако строка должна быть заключена в кавычки, если присутствует один или несколько пробелов, например, `echo "Привет, друг!"`.

### Использование whoami
Команда `whoami` может использоваться для определения имени пользователя, под которым мы вошли в систему.

```bash
tryhackme@linux1:~$ whoami
tryhackme
```

## Взаимодействие с файловой системой

Как я уже говорил, умение навигировать по машине, в которую вы вошли, не полагаясь на графическую среду, довольно важно. В конце концов, какой смысл входить в систему, если мы не можем никуда попасть?

| Команда | Полное название |
|---------|----------------|
| ls      | listing (листинг) |
| cd      | change directory (изменить директорию) |
| cat     | concatenate (конкатенировать) |
| pwd     | print working directory (показать рабочую директорию) |

### Список файлов в текущей директории (ls)

Прежде чем мы сможем что-либо делать, например, узнавать содержимое файлов или папок, нам нужно знать, что вообще существует. Это можно сделать с помощью команды "ls" (сокращение от listing):

```bash
tryhackme@linux1:~$ ls
'Важные файлы' 'Мои документы' Заметки Картинки
```

На скриншоте выше мы видим следующие директории/папки:
- Важные файлы
- Мои документы
- Заметки
- Картинки

Отлично! Вы, вероятно, можете догадаться, что ожидать в папке, исходя из ее названия.

**Совет:** Вы можете просмотреть содержимое директории, не переходя в нее, используя `ls` и название директории. Например: `ls Картинки`

### Изменение текущей директории (cd)

Теперь, когда мы знаем, какие папки существуют, нам нужно использовать команду "cd" (сокращение от change directory) для перехода в эту директорию. Скажем, если я хочу открыть директорию "Картинки" — я выполню `cd Картинки`. Опять же, мы хотим узнать содержимое этой директории "Картинки", и для этого мы снова используем `ls`:

```bash
tryhackme@linux1:~/Картинки$ ls
dog_picture1.jpg dog_picture2.jpg dog_picture3.jpg dog_picture4.jpg
```

В этом случае похоже, что там есть 4 картинки собак!

### Вывод содержимого файла (cat)

Хотя знание о существовании файлов прекрасно — это не очень полезно, если мы не можем просматривать их содержимое.

Позже мы обсудим некоторые доступные нам инструменты для передачи файлов с одной машины на другую. Но пока мы поговорим о простом просмотре содержимого текстовых файлов с помощью команды `cat`.

"Cat" — сокращение от concatenating и является фантастическим способом вывода содержимого файлов (не только текстовых!).

На скриншоте ниже вы можете увидеть, как я объединил использование "ls" для перечисления файлов в директории "Документы":

```bash
tryhackme@linux1:~/Документы$ ls
todo.txt
tryhackme@linux1:~/Документы$ cat todo.txt
Вот что-то важное, что мне нужно сделать позже!
```

Мы применили знания из предыдущих разделов:
1. Использовали "ls", чтобы узнать, какие файлы доступны в папке "Документы" этой машины. В этом случае это файл "todo.txt".
2. Затем использовали `cat todo.txt`, чтобы конкатенировать/вывести содержимое этого файла "todo.txt", где содержимое — "Вот что-то важное, что мне нужно сделать позже!"

**Совет:** Вы можете использовать `cat` для вывода содержимого файла в директориях, не переходя в них, используя `cat` и название директории. Например: `cat /home/ubuntu/Документы/todo.txt`

Иногда такие вещи, как имена пользователей, пароли (да, действительно...), флаги или настройки конфигурации хранятся в файлах, где `cat` может использоваться для их получения.

### Определение полного пути к текущей рабочей директории (pwd)

Вы заметите, что по мере продвижения по навигации вашей Linux-машины, название директории, в которой вы сейчас работаете, будет указано в вашем терминале.

Легко потерять след того, где именно мы находимся в файловой системе, поэтому я хочу представить команду "pwd". Это означает print working directory.

Используя пример машины из предыдущего примера, мы сейчас в папке "Документы" — но где именно это находится в файловой системе Linux-машины? Мы можем узнать это, используя команду "pwd":

```bash
tryhackme@linux1:~/Документы$ pwd
/home/ubuntu/Документы
tryhackme@linux1:~/Документы$
```

Давайте разберем это:
1. Мы уже знаем, что мы в "Документах" благодаря нашему терминалу, но на данный момент мы понятия не имеем, где хранятся "Документы", чтобы легко вернуться к ним в будущем.
2. Я использовал команду "pwd" (print working directory), чтобы найти полный путь к этой папке "Документы".
3. Linux любезно сообщает нам, что эта директория "Документы" хранится по адресу "/home/ubuntu/Документы" на машине — отлично знать!

Теперь в будущем, если мы окажемся в другом месте, мы можем просто использовать `cd /home/ubuntu/Документы`, чтобы изменить нашу рабочую директорию на эту директорию "Документы".

## Продвинутые команды поиска

Хотя пока это может показаться не так, одна из искупительных особенностей Linux — это насколько эффективным вы можете быть с ним. Конечно, вы можете быть эффективными только настолько, насколько хорошо знакомы с системой.

По мере взаимодействия с ОС, такими как Ubuntu, основные команды, которые мы уже рассмотрели, начнут становиться мышечной памятью.

Один фантастический способ показать, насколько эффективными вы можете быть с такими системами, — это использование набора команд для быстрого поиска файлов по всей системе, к которым наш пользователь имеет доступ. Нет необходимости постоянно использовать `cd` и `ls`, чтобы выяснить, что где находится. Вместо этого мы можем использовать такие команды, как `find`, чтобы автоматизировать это для нас!

### Использование find

Команда `find` фантастична в том смысле, что может использоваться как очень просто, так и довольно сложно, в зависимости от того, что именно вы хотите сделать. Однако давайте сначала придерживаемся основ.

Возьмем приведенный ниже фрагмент; мы можем увидеть список доступных нам директорий:

```bash
tryhackme@linux1:~$ ls
Рабочий стол Документы Картинки папка1
```

Конечно, директории могут содержать еще больше директорий внутри себя. Это становится головной болью, когда нам приходится просматривать каждую из них, просто пытаясь найти конкретные файлы. Мы можем использовать `find`, чтобы сделать это для нас!

Давайте начнем с простого и предположим, что мы уже знаем название файла, который ищем — но не можем вспомнить, где именно он находится! В этом случае мы ищем "passwords.txt"

Если мы помним название файла, мы можем просто использовать `find -name passwords.txt`, где команда будет искать в каждой папке нашей текущей директории этот конкретный файл:

```bash
tryhackme@linux1:~$ find -name passwords.txt
./папка1/passwords.txt
```

"Find" смог найти файл — оказывается, он находится в папка1/passwords.txt — отлично. Но скажем, мы не знаем название файла или хотим найти каждый файл с расширением, например ".txt". Find позволяет нам делать и это!

Мы можем просто использовать то, что называется подстановочным знаком (*) для поиска всего, что имеет .txt в конце. В нашем случае мы хотим найти каждый .txt файл в нашей текущей директории. Мы построим команду типа `find -name *.txt`. "Find" смог найти каждый .txt файл и дал нам расположение каждого:

```bash
tryhackme@linux1:~$ find -name *.txt
./папка1/passwords.txt
./Документы/todo.txt
```

Find смог найти:
- "passwords.txt" расположенный в "папка1"
- "todo.txt" расположенный в "Документы"

Не так уж сложно, правда!

### Использование grep

Еще одна отличная утилита, которую стоит изучить, — это использование `grep`. Команда `grep` позволяет нам искать содержимое файлов для конкретных значений, которые мы ищем.

Возьмем, например, журнал доступа веб-сервера. В этом случае access.log веб-сервера содержит 244 записи.

```bash
tryhackme@linux1:~$ wc -l access.log
244 access.log
```

Использование команды типа `cat` здесь не очень подойдет. Скажем, например, если мы хотели найти в этом файле журнала вещи, которые посетил определенный пользователь/IP-адрес? Просмотр 244 записей не очень эффективен, учитывая, что мы хотим найти конкретное значение.

Мы можем использовать `grep` для поиска по всему содержимому этого файла любых записей значения, которое мы ищем. Следуя примеру журнала доступа веб-сервера, мы хотим увидеть все, что посетил IP-адрес "81.143.211.90" (обратите внимание, что это вымышленно):

```bash
tryhackme@linux1:~$ grep "81.143.211.90" access.log
81.143.211.90 - - [25/Mar/2021:11:17 + 0000] "GET / HTTP/1.1" 200 417 "-" "Mozilla/5.0 (Linux; Android 7.0; Moto G(4))"
```

"Grep" просмотрел этот файл и показал нам любые записи того, что мы предоставили, и что содержится в этом файле журнала для IP.

## Операторы оболочки Linux

Операторы Linux — это фантастический способ улучшить ваши знания работы с Linux. Есть несколько важных операторов, которые стоит отметить. Мы рассмотрим основы и разберем их соответственно на легко усваиваемые части.

В обзоре я продемонстрирую следующие операторы:

| Символ/Оператор | Описание |
|----------------|----------|
| &              | Этот оператор позволяет запускать команды в фоновом режиме терминала |
| &&             | Этот оператор позволяет объединять несколько команд в одной строке терминала |
| >              | Этот оператор является перенаправителем — означает, что мы можем взять вывод команды (например, использование cat для вывода файла) и направить его в другое место |
| >>             | Этот оператор выполняет ту же функцию, что и оператор >, но добавляет вывод, а не заменяет (ничего не перезаписывается) |

Давайте рассмотрим их более подробно.

### Оператор "&"

Этот оператор позволяет нам выполнять команды в фоновом режиме. Например, скажем, мы хотим скопировать большой файл. Это, очевидно, займет довольно много времени и оставит нас неспособными делать что-либо еще, пока файл успешно не скопируется.

Оператор оболочки "&" позволяет нам выполнить команду и запустить ее в фоновом режиме (например, это копирование файла), позволяя нам делать другие вещи!

### Оператор "&&"

Этот оператор оболочки немного вводит в заблуждение в смысле того, насколько он знаком со своим партнером "&". В отличие от оператора "&", мы можем использовать "&&" для составления списка команд для выполнения, например `команда1 && команда2`. Однако стоит отметить, что команда2 будет выполнена только в том случае, если команда1 была успешной.

### Оператор ">"

Этот оператор известен как перенаправитель вывода. По сути, это означает, что мы берем вывод команды, которую мы запускаем, и отправляем этот вывод куда-то еще.

Отличный пример этого — перенаправление вывода команды `echo`, которую мы изучили в задаче 4. Конечно, выполнение чего-то вроде `echo привет` вернет "привет" обратно в наш терминал — это не очень полезно. Вместо этого мы можем перенаправить "привет" во что-то вроде нового файла!

Скажем, мы хотели создать файл с именем "welcome" с сообщением "привет". Мы можем выполнить `echo привет > welcome`, где мы хотим, чтобы файл был создан с содержимым "привет":

```bash
tryhackme@linux1:~$ echo привет > welcome
tryhackme@linux1:~$ cat welcome
привет
```

**Примечание:** Если файл, например "welcome", уже существует, содержимое будет перезаписано!

### Оператор ">>"

Этот оператор также является перенаправителем вывода, как и предыдущий оператор (>), который мы обсудили. Однако то, что делает этот оператор отличным, это то, что вместо перезаписи любого содержимого в файле он просто помещает вывод в конец.

Продолжая наш предыдущий пример, где у нас есть файл "welcome" с содержимым "привет". Если бы мы использовали `echo` для добавления "hello" в файл, используя оператор >, файл теперь будет содержать только "hello", а не "привет".

Оператор >> позволяет нам добавить вывод в конец файла — а не заменить содержимое:

```bash
tryhackme@linux1:~$ echo hello >> welcome
tryhackme@linux1:~$ cat welcome
привет
hello
```

## Заключение

Отличная работа в достижении этого этапа! Мы охватили довольно много для ваших первых взаимодействий с Linux. Однако это наиболее важные/основные функции, которые вы будете использовать всякий раз, когда взаимодействуете с машиной Linux.

Я надеюсь, что эта комната не была слишком пугающей для вас. Как я уже упоминал ранее, вы очень быстро освоитесь с этими вещами из-за того, как часто вы будете их использовать.

Чтобы быстро повторить, мы рассмотрели следующее:

- Понимание того, почему Linux так распространен сегодня
- Взаимодействие с вашей первой Linux-машиной!
- Выполнение некоторых из наиболее фундаментальных команд
- Введение в навигацию по файловой системе и то, как мы можем использовать команды типа `find` и `grep`, чтобы сделать поиск данных еще более эффективным!
- Усиление ваших команд изучением некоторых важных операторов оболочки

Потратьте некоторое время на игру в этой комнате. Когда почувствуете себя немного более комфортно, переходите к Linux Fundamentals Part 2.

---

# Linux Fundamentals Part 2

# Основы работы с Linux

## Введение в аргументы и флаги команд

Большинство команд Linux поддерживают дополнительные аргументы, которые обозначаются дефисом и определенным ключевым словом. Эти аргументы называются флагами или переключателями.

Далее мы рассмотрим, как определить, какие команды поддерживают аргументы, и разберем их назначение.

### Поведение команд по умолчанию

При использовании команды без дополнительных параметров она выполняет свое поведение по умолчанию. Например, команда `ls` выводит содержимое текущей рабочей директории, но скрытые файлы при этом не отображаются.

**Пример базового использования ls:**
```bash
tryhackme@linux2:~$ ls
folder1
```

### Использование флагов для расширения функциональности

Флаги и переключатели позволяют изменить поведение команд. Например, флаг `-a` (сокращение от `--all`) заставляет `ls` показать все файлы, включая скрытые (начинающиеся с точки).

**Пример с флагом -a:**
```bash
tryhackme@linux2:~$ ls -a 
.hiddenfolder folder1
```

### Получение справки по командам

#### Флаг --help

Команды, поддерживающие аргументы, обычно имеют опцию `--help`, которая выводит:
- Список доступных параметров
- Краткое описание каждого параметра  
- Примеры использования

**Пример справки для ls:**
```bash
tryhackme@linux2:~$ ls --help
Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).

Mandatory arguments to long options are mandatory for short options too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
  -l                         use a long listing format
  -h, --human-readable       with -l, print sizes in human readable format
  ...
```

#### Руководства man (manual pages)

Справка `--help` фактически является сокращенной версией man-страниц — подробной документации для команд и приложений Linux.

**Доступ к man-страницам:**
```bash
tryhackme@linux2:~$ man ls
```

Man-страницы содержат:
- Полное описание команды
- Детальный список всех параметров
- Примеры использования
- Связанные команды

## Основные команды для работы с файловой системой

| Команда | Полное название | Назначение |
|---------|-----------------|------------|
| `touch` | touch | Создание файла |
| `mkdir` | make directory | Создание директории |
| `cp` | copy | Копирование файлов/директорий |
| `mv` | move | Перемещение/переименование |
| `rm` | remove | Удаление файлов/директорий |
| `file` | file | Определение типа файла |

> **Совет:** Как и с командой `cat`, для всех этих команд можно указывать полные пути файлов, например: `directory1/directory2/note`

### Создание файлов и директорий

#### Создание файлов (touch)

Команда `touch` создает пустой файл с указанным именем:

```bash
tryhackme@linux2:~$ touch note
tryhackme@linux2:~$ ls           
folder1 note
```

> **Примечание:** `touch` создает только пустой файл. Для добавления содержимого используйте текстовые редакторы (`nano`, `vim`) или команды вывода (`echo`).

#### Создание директорий (mkdir)

Команда `mkdir` создает новую директорию:

```bash
tryhackme@linux2:~$ mkdir mydirectory
tryhackme@linux2:~$ ls           
folder1 mydirectory note
```

### Удаление файлов и директорий (rm)

Команда `rm` отличается от других рассмотренных команд особыми требованиями:

**Удаление файлов:**
```bash
tryhackme@linux2:~$ rm note
tryhackme@linux2:~$ ls           
folder1 mydirectory
```

**Удаление директорий:**
Для удаления директорий необходим флаг `-R` (рекурсивное удаление):

```bash
tryhackme@linux2:~$ rm -R mydirectory
tryhackme@linux2:~$ ls           
folder1
```

### Копирование и перемещение

#### Копирование файлов (cp)

Команда `cp` принимает два аргумента:
1. Имя существующего файла
2. Имя нового файла для копии

```bash
tryhackme@linux2:~$ cp note note2
tryhackme@linux2:~$ ls           
folder1 note note2
```

#### Перемещение и переименование (mv)

Команда `mv` также принимает два аргумента, но вместо создания копии перемещает или переименовывает файл:

```bash
tryhackme@linux2:~$ mv note2 note3
tryhackme@linux2:~$ ls           
folder1 note note3
```

### Определение типа файла

Команда `file` помогает определить тип файла независимо от его расширения:

```bash
tryhackme@linux2:~$ file note
note: ASCII text
```

Это особенно полезно, поскольку в Linux расширения файлов не являются обязательными, и тип файла может не соответствовать ожиданиям.

## Система прав доступа

### Просмотр прав доступа

Команда `ls -l` показывает подробную информацию о файлах, включая права доступа:

```bash
tryhackme@linux2:~$ ls -lh
-rw-r--r-- 1 cmnatic cmnatic 0 Feb 19 10:37 file1
-rw-r--r-- 8 cmnatic cmnatic 0 Feb 19 10:37 file2
```

### Типы прав доступа

Система прав доступа Linux включает три основных типа действий:
- **Read (r)** — чтение
- **Write (w)** — запись  
- **Execute (x)** — выполнение

### Пользователи и группы

Linux позволяет настроить детальные права доступа:
- **Владелец файла** может иметь одни права
- **Группа пользователей** может иметь другие права
- **Остальные пользователи** могут иметь третий набор прав

Это обеспечивает гибкую систему безопасности без необходимости изменения владельца файла.

### Переключение между пользователями

#### Команда su

Команда `su` (substitute user) позволяет переключаться между учетными записями пользователей.

**Требования для переключения:**
- Имя пользователя, на которого нужно переключиться
- Пароль этого пользователя

**Основные флаги:**
- `-l` или `--login` — запуск оболочки с полным окружением нового пользователя

**Базовое переключение:**
```bash
tryhackme@linux2:~$ su user2
Password:
user2@linux2:/home/tryhackme$
```

**Переключение с полным окружением:**
```bash
tryhackme@linux2:~$ su -l user2
Password:
user2@linux2:~$ pwd
/home/user2
```

Флаг `-l` автоматически перемещает в домашнюю директорию нового пользователя и загружает его переменные окружения.

## Важные системные директории

### /etc — Системные конфигурации

Директория `/etc` (сокращение от "etcetera") содержит важнейшие конфигурационные файлы системы:

```bash
tryhackme@linux2:/etc$ ls
shadow passwd sudoers sudoers.d
```

**Ключевые файлы:**
- `sudoers` — список пользователей и групп с правами sudo
- `passwd` — информация о пользователях системы
- `shadow` — зашифрованные пароли пользователей (формат sha512)

### /var — Переменные данные

Директория `/var` (variable data) хранит данные, которые часто изменяются:

```bash
tryhackme@linux2:/var$ ls
backups log opt tmp
```

**Основное содержимое:**
- `/var/log` — файлы логов системы и приложений
- `/var/tmp` — временные файлы
- Базы данных и другие изменяемые данные

### /root — Домашняя директория root

В отличие от обычных пользователей (домашние директории в `/home`), пользователь root имеет домашнюю директорию `/root`:

```bash
root@linux2:~# ls
myfile myfolder passwords.xlsx
```

### /tmp — Временные файлы

Директория `/tmp` предназначена для временного хранения данных:

```bash
root@linux2:/tmp# ls
todelete trash.txt rubbish.bin
```

**Особенности:**
- Содержимое очищается при перезагрузке системы
- По умолчанию доступна для записи всем пользователям
- Полезна для размещения скриптов и временных файлов в процессе работы

## Заключение

В этом руководстве мы изучили:

1. **Работу с командами:** использование флагов, получение справки через `--help` и man-страницы
2. **Базовые команды файловой системы:** создание, копирование, перемещение и удаление файлов и директорий
3. **Систему прав доступа:** основы прав чтения, записи и выполнения
4. **Переключение пользователей:** команда `su` и ее опции
5. **Структуру системы:** важные директории и их назначение

Эти знания составляют фундамент для эффективной работы с операционной системой Linux. Рекомендуется несколько раз повторить материал для лучшего усвоения — практика делает совершенным!
